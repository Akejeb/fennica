---
title : "Publication time"
hide-description: false
description: ""
---

```{r}
#| label = "source-index",
#| include = FALSE
source("init.R")
source("publication_time.R")
```

MARC field: [008/07-14](https://www.loc.gov/marc/bibliographic/bd008.html)

Polish publication time field:
[publication_time.R](https://github.com/fennicahub/fennica/blob/master/inst/examples/publication_time.R)

Harmonize temporal data function:
[polish_years.R](https://github.com/fennicahub/fennica/blob/master/R/polish_years.R)

Render publication time field: 
[publication_time.qmd](https://github.com/fennicahub/fennica/blob/master/inst/examples/publication_time.qmd)



The publication years section offers a comprehensive summary of the dataset's years of publication, providing anunderstanding of the temporal distribution of titles. The inclusion of links to uniquely accepted and discarded output tables adds a layer of transparency, allowing for detailed exploration of the refined and excluded data.

## Complete Data Overview

[Publication year conversions](dataTable/data_table.html?path=../output.tables/publication_time_conversion.csv)

[Publication year discarded](dataTable/data_table.html?path=../output.tables/publication_time_discarded.csv)

[Publication year discarded with melinda id](dataTable/data_table.html?path=../output.tables/publication_time_discarded_id.csv)


```{r}
#| include = FALSE
library(lubridate)
min_year <- min(na.omit(as.numeric(df_pub_time$publication_year)), na.rm = TRUE)
max_year <- max(na.omit(as.numeric(df_pub_time$publication_year)), na.rm = TRUE)

# Ensure max_year is not greater than the current year
current_year <- year(today())
if (max_year > current_year) {
 max_year <- current_year
}
```

Publication years is available for `r sum(!is.na(df_pub_time$publication_year))` documents (`r round(100*mean(!is.na(df_pub_time$publication_year)))`%). 
The publication years span is `r paste(min_year, max_year, sep = "-")`.

### Title count per decade (log values)

```{r}
#| label = "publication_timeseries",
#| echo = FALSE,
#| message = FALSE,
#| warning = FALSE,
#| results = "asis",
#| fig.width = 8,
#| fig.height = 6
df2 <- df_pub_time %>% 
  group_by(publication_decade) %>% 
  filter(publication_decade <= 2030) 
p <- ggplot(df2, aes(publication_decade)) +
  geom_bar() + scale_y_log10() +
  ggtitle("Title count timeline") +
  xlim(1450, current_year) 
print(p)
```

### Publication status summaries

ThÑƒ visualization of publication status field enhances understanding of how publication years are recorded. The harmonization process depended on the publication status field due to its nuanced information, which doesn't always directly signify the start or end of publication. 

```{r}
#| label = "publication_status",
#| echo = FALSE,
#| results = "asis",
#| fig.width = 8,
#| fig.height = 6
x <- top(df.orig, "publication_status")
tab <- cbind(names(x), unname(x), round(100 * unname(x/nrow(df.orig)), 1))
colnames(tab) <- c("Publication Status", "Documents (n)", "Fraction (%)")
kable(head(tab, 14))
```

## Subset Analysis: 1809-1917

[Publication year conversions](dataTable/data_table.html?path=../output.tables/publication_time_conversion_19.csv)

[Publication year discarded](dataTable/data_table.html?path=../output.tables/publication_time_discarded_19.csv)

### Title count per decade

A plot depicting title counts per decade from 1809 to 1917 enriches the analysis by visually capturing the trends and fluctuations in literary output over this historical period.

```{r}
#| label = "summarypublicationyear",
#| echo = FALSE,
#| message = FALSE,
#| warning = FALSE,
#| fig.width = 8,
#| fig.height = 6

df2 <- df_pubtime19 %>% 
 group_by(publication_decade) %>% 
 filter(publication_decade <= 1920) 

p <- ggplot(df2, aes(publication_decade)) +
     geom_bar() + scale_y_log10() +
     ggtitle("Title count timeline") +
     xlim(1809, 1917) 

print(p)

```
